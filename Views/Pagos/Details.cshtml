@model Inmobiliaria_Zarate_DoNet.Models.Pago
@using Inmobiliaria_Zarate_DoNet.Utils
@{
    var rol = Context.Session.GetString(SessionKeys.UserRol);
    ViewData["Title"] = "Detalle de pago";
}

<h2>@ViewData["Title"]</h2>

<dl class="row">
    <dt class="col-sm-2">Contrato</dt>
    <dd class="col-sm-10">@Model.ContratoResumen</dd>

    <dt class="col-sm-2">Fecha</dt>
    <dd class="col-sm-10">@Model.Fecha.ToShortDateString()</dd>

    <dt class="col-sm-2">Número</dt>
    <dd class="col-sm-10">@Model.Numero</dd>

    <dt class="col-sm-2">Importe</dt>
    <dd class="col-sm-10">@Model.Importe.ToString("C")</dd>

    <dt class="col-sm-2">Detalle</dt>
    <dd class="col-sm-10">@Model.Detalle</dd>

    <dt class="col-sm-2">Estado</dt>
    <dd class="col-sm-10">@(Model.Anulado ? "Anulado" : "Activo")</dd>
</dl>

@if (rol == "ADMIN")
{
    <hr />
    <h5>Auditoría</h5>
    <dl class="row">
        <dt class="col-sm-3">Creado por</dt>
        <dd class="col-sm-9">@Model.CreadoPor (@Model.CreadoEn)</dd>

        <dt class="col-sm-3">Anulado por</dt>
        <dd class="col-sm-9">
            @if (Model.AnuladoPor == null)
            {
                <span class="text-muted">—</span>
            }
            else
            {
                @Model.AnuladoPor
                @if (Model.AnuladoEn != null)
                {
                    <span> — @Model.AnuladoEn</span>
                }
            }
        </dd>
    </dl>
}

<div class="mt-3">
    @if (rol == "ADMIN" && !Model.Anulado)
    {
        <a asp-action="Anular" asp-route-id="@Model.Id" class="btn btn-danger">Anular</a>
    }
    <a asp-action="Index" class="btn btn-secondary">Volver</a>
</div>
